document.getElementById("gachaButton").addEventListener("click", () => {
  console.log("Button clicked");

  if (!Module || !Module.ccall) {
    alert("ã¾ã åˆæœŸåŒ–ä¸­ã®ã‚ˆã†ã§ã™ã€‚ã‚‚ã†å°‘ã—å¾…ã£ã¦ã‹ã‚‰è©¦ã—ã¦ãã ã•ã„ã€‚");
    return;
  }

  const numberField = document.getElementById("userInput");
  console.log("numberField:", numberField);
  const inputValue = numberField.value;
  console.log("å–å¾—ã—ãŸå…¥åŠ›å€¤:", inputValue);
  const val = parseInt(inputValue, 10);
  console.log("parseIntå¾Œã®å€¤:", val);

  if (isNaN(val)) {
    alert("æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
    return;
  } else if (val < 1) {
    alert("1ä»¥ä¸Šã®å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
    return;
  }

  const ret = Module.ccall(
    "gacya",    // C++ é–¢æ•°å
    "number",   // è¿”ã‚Šå€¤ã®å‹
    ["number"], // å¼•æ•°ã®å‹
    [val]       // å®Ÿéš›ã®å¼•æ•°
  );
  console.log("gacya() ã®æˆ»ã‚Šå€¤:", ret);

  const ans = (ret === 1) ? "å½“ãŸã‚ŠğŸ‰" : "ãƒã‚ºãƒ¬ğŸ’”";
  document.getElementById("result").textContent = `çµæœ: ${ans}`;
});


